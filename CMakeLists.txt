project(granatier)

# allow standalone build of Granatier (outside kdegames, e.g. in work branches)
if (NOT KDE4_FOUND)
  find_package(KDE4 REQUIRED)
  include(KDE4Defaults)
  include_directories(${KDE4_INCLUDES})
endif (NOT KDE4_FOUND)

find_package(OpenAL REQUIRED)
macro_log_feature(OPENAL_FOUND "OpenAL" "OpenAL (Open Audio Library) is a free software cross-platform audio API." "http://connect.creativelabs.com/openal" TRUE "" "Granatier uses OpenAL for sound output.")

set(CMAKE_MODULE_PATH "${CMAKE_CURRENT_SOURCE_DIR}/cmake/modules")
find_package(SndFile REQUIRED)
macro_log_feature(SNDFILE_FOUND "SndFile" "libsndfile is a C library written by Erik de Castro Lopo for reading and writing audio files." "http://www.mega-nerd.com/libsndfile/" TRUE "" "SndFile is needed to decode the sound files.")

if(OPENAL_FOUND AND SNDFILE_FOUND)
  include_directories(${OPENAL_INCLUDE_DIR} ${SNDFILE_INCLUDE_DIRS})
  include_directories(src/TagaroAudio)
  add_subdirectory(themes) 
  add_subdirectory(sounds)
  add_subdirectory(pictures)
  add_subdirectory(src)
  add_subdirectory(arenas)
  add_subdirectory(players)
endif(OPENAL_FOUND AND SNDFILE_FOUND)
